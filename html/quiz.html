<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta name="description" content="Test your Business Ethics knowledge with interactive quizzes. Topics include Utilitarianism, Kantianism, Virtue Ethics, CSR, discrimination, and more.">

    <!-- Open Graph / Facebook -->
    <meta property="og:title" content="Business Ethics Quiz - Philosophito">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://philosophito.alexandroskourtis.me/html/quiz.html">
    <meta property="og:image" content="https://philosophito.alexandroskourtis.me/img/philosophito.png">
    <meta property="og:description" content="Interactive Business Ethics quizzes covering moral theories and ethical issues. Test your knowledge now!">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Business Ethics Quiz - Philosophito">
    <meta name="twitter:description" content="Interactive quizzes on Business Ethics: test your knowledge of moral theories and ethical issues.">

    <!-- Canonical URL -->
    <link rel="canonical" href="https://philosophito.alexandroskourtis.me/html/quiz.html">

    <script src="../libs/babel.min.js"></script>
    <script src="../libs/react.production.min.js"></script>
    <script src="../libs/react-dom.production.min.js"></script>
    <title>Business Ethics Quiz - Philosophito</title>
    <link href='../img/philosophito.png' rel='icon' type='image/png'>
    <link href="../css/style.css" rel="stylesheet">

    <!-- JSON-LD Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Quiz",
      "name": "Business Ethics Quiz",
      "description": "Test your knowledge of Business Ethics including Utilitarianism, Kantianism, Virtue Ethics, CSR, and ethical issues",
      "educationalLevel": "College/University",
      "educationalUse": "assessment",
      "learningResourceType": "Quiz",
      "inLanguage": "en-US",
      "isAccessibleForFree": true,
      "about": [
        {
          "@type": "Thing",
          "name": "Business Ethics"
        },
        {
          "@type": "Thing",
          "name": "Moral Philosophy"
        }
      ]
    }
    </script>

    <style>
        #root {
            visibility: hidden;
        }
    </style>
</head>

<body>
<header>
    <nav>
        <ul>
            <li><a href="./moraltheories.html">Moral Theories</a></li>
            <li><a href="./moralissues.html">Moral Issues</a></li>
            <li><a href="./dictionary.html">Dictionary</a></li>
            <li><a href="./foodforthought.html">Food For Thought</a></li>
            <li><a href="./quiz.html">Quiz-Exercise sets</a></li>
            <li style="float: right"><a href="./about.html">Philosophito</a></li>
        </ul>
    </nav>
</header>

<div class="js-container container" style="height: 0;"></div>

<main>
    <div class="selects">
        <select class="searchTerm" id="chapterselect" onchange="showOnly(event)">
            <option selected value="0">Select topic:</option>
            <option value="Utilitarianism">Utilitarianism</option>
            <option value="Kantianism">Kantianism</option>
            <option value="Virtue-Ethics">Virtue Ethics</option>
            <option value="Corporate-Social-Responsibility">Corporate Social Responsibility</option>
            <option value="Deceptive-Advertising">Deceptive Advertising</option>
            <option value="Affirmative-Action">Affirmative Action</option>
            <option value="Corporate-Governance">Corporate Governance</option>
            <option value="Discrimination">Discrimination</option>
            <option value="Employment">Employment</option>
            <option value="Product-Safety">Product Safety</option>
            <option value="Sexual-Harassment">Sexual Harassment</option>
            <option value="Whistleblowing">Whistleblowing</option>
        </select>
    </div>


    <div id="root"></div>

    <button onclick="submit()">
        Submit
    </button>


</main>

<footer>
    <p>Philosophito was created by <a href="https://alexkourtis.me">Alexandros Kourtis</a> and supported by <a
            href="https://dccyberclub.com">Cyber Club</a> and <a
            href="https://www.acg.edu/undergraduate/academic-enrichment-programs/student-academic-support-services/">SASS</a>.
    </p>
</footer>
<script type="text/babel">

    let questionsnumber = 0;
    let correctanswers = 0;

    let datajson = []
    let originaldatajson = [];

    const root = ReactDOM.createRoot(
        document.getElementById('root')
    );

    init();

    async function showDataWithNoShuffle(datatoshow) {
        let elements = [];
        await datatoshow.forEach((datum, index) => {
            const element = (
                <section className="chapter" key={index}>
                    <div className="box">
                        <div className="title">
                            <h3>{datum.question}</h3>
                        </div>
                        <div className="answers">
                            <ol>
                                {(() => {
                                    if (datum.answer1.trim() !== '') {
                                        return (
                                            <li>
                                                <button className="ansbtn" id={"button-" + index + "-0"}
                                                        onClick={() => testAnswer(index, "answer1", 0, datatoshow)}>
                                                    {datum.answer1}
                                                </button>
                                            </li>
                                        )
                                    }
                                    return null;
                                })()}
                                {(() => {
                                    if (datum.answer2.trim() !== '') {
                                        return (
                                            <li>
                                                <button className="ansbtn" id={"button-" + index + "-1"}
                                                        onClick={() => testAnswer(index, "answer2", 1, datatoshow)}>
                                                    {datum.answer2}
                                                </button>
                                            </li>
                                        )
                                    }
                                    return null;
                                })()}
                                {(() => {
                                    if (datum.answer3.trim() !== '') {
                                        return (
                                            <li>
                                                <button className="ansbtn" id={"button-" + index + "-2"}
                                                        onClick={() => testAnswer(index, "answer3", 2, datatoshow)}>
                                                    {datum.answer3}
                                                </button>
                                            </li>
                                        )
                                    }
                                    return null;
                                })()}
                                {(() => {
                                    if (datum.answer4.trim() !== '') {
                                        return (
                                            <li>
                                                <button className="ansbtn" id={"button-" + index + "-3"}
                                                        onClick={() => testAnswer(index, "answer4", 3, datatoshow)}>
                                                    {datum.answer4}
                                                </button>
                                            </li>
                                        )
                                    }
                                    return null;
                                })()}
                            </ol>
                        </div>
                    </div>
                </section>
            );

            elements.push(element);
        });

        questionsnumber = datatoshow.length;
        correctanswers = 0;

        await root.render(elements);
    }


    async function showData(datatoshow) {
        let elements = [];
        await datatoshow.forEach((datum, index) => {
            const element = (
                <section className="chapter" key={index}>
                    <div className="box">
                        <div className="title">
                            <h3>{datum.question}</h3>
                        </div>
                        <div className="answers">
                            <ol>
                                {(() => {
                                    if (datum.answer1.trim() !== '') {
                                        return (
                                            <li>
                                                <button className="ansbtn" id={"button-" + index + "-0"}
                                                        onClick={() => testAnswer(index, "answer1", 0, datatoshow)}>
                                                    {datum.answer1}
                                                </button>
                                            </li>
                                        )
                                    }
                                    return null;
                                })()}
                                {(() => {
                                    if (datum.answer2.trim() !== '') {
                                        return (
                                            <li>
                                                <button className="ansbtn" id={"button-" + index + "-1"}
                                                        onClick={() => testAnswer(index, "answer2", 1, datatoshow)}>
                                                    {datum.answer2}
                                                </button>
                                            </li>
                                        )
                                    }
                                    return null;
                                })()}
                                {(() => {
                                    if (datum.answer3.trim() !== '') {
                                        return (
                                            <li>
                                                <button className="ansbtn" id={"button-" + index + "-2"}
                                                        onClick={() => testAnswer(index, "answer3", 2, datatoshow)}>
                                                    {datum.answer3}
                                                </button>
                                            </li>
                                        )
                                    }
                                    return null;
                                })()}
                                {(() => {
                                    if (datum.answer4.trim() !== '') {
                                        return (
                                            <li>
                                                <button className="ansbtn" id={"button-" + index + "-3"}
                                                        onClick={() => testAnswer(index, "answer4", 3, datatoshow)}>
                                                    {datum.answer4}
                                                </button>
                                            </li>
                                        )
                                    }
                                    return null;
                                })()}
                            </ol>
                        </div>
                        <div className="texts">
                            <div id={"statushere-" + index}>
                            </div>
                        </div>
                    </div>
                </section>
            );

            elements.push(element);
        });

        questionsnumber = datatoshow.length;
        correctanswers = 0;

        await root.render(elements);
        await delay(100);
        document.getElementById('root').querySelectorAll("ol").forEach(el => el.shuffleChildren());
        document.getElementById('root').shuffleChildren();
        document.getElementById('root').style.visibility = "visible";
    }

    function cleanUpErrorsCorrects() {
        const nodestexts = document.getElementsByClassName("texts");

        for (let i = 0; i < nodestexts.length; i++) {
            nodestexts[i].childNodes.forEach(node => node.textContent = "");
        }

        const nodes = document.getElementsByClassName("ansbtn");

        for (let i = 0; i < nodes.length; i++) {
            nodes[i].disabled = false;
            nodes[i].style.backgroundColor === "#4BB543" ? "#4BB543" : "#BF996F";
        }
    }

    function showOnly(event) {
        datajson = [...originaldatajson];

        let val = event.target.value;
        let datatoshow = [];
        if (val === "0") {
            showData(originaldatajson);
            return;
        }

        Object.entries(datajson).forEach(([key, value]) => {
            if (value.chapter === val)
                datatoshow.push(value);
        });

        cleanUpErrorsCorrects();

        datajson = [];
        datajson = [...datatoshow];
        showData(datatoshow);
    }

    function grayOutButtons(index) {
        const button1 = document.getElementById("button-" + index + "-" + 0);
        if (button1) {
            button1.disabled = true;
        }
        const button2 = document.getElementById("button-" + index + "-" + 1);
        if (button2) {
            button2.disabled = true;
        }
        const button3 = document.getElementById("button-" + index + "-" + 2);
        if (button3) {
            button3.disabled = true;
        }
        const button4 = document.getElementById("button-" + index + "-" + 3);
        if (button4) {
            button4.disabled = true;
        }
    }

    function testAnswer(index, answerselected, indexBtn, data) {
        const coorectanswer = data[index].correct;
        if (coorectanswer === answerselected) {
            grayOutButtons(index);
            document.getElementById("button-" + index + "-" + indexBtn).style.backgroundColor = "#4BB543";
            correctanswers++;
        } else {
            document.getElementById("button-" + index + "-" + indexBtn).disabled = true;
        }

    }

    async function init() {
        datajson = await getData();
        originaldatajson = datajson;
        await showData(datajson);
    }

    Element.prototype.shuffleChildren = function () {
        for (let i = this.children.length; i >= 0; i--) {
            this.appendChild(this.children[Math.random() * i | 0]);
        }
    };

    const delay = ms => new Promise(res => setTimeout(res, ms));

    async function getData() {
        return await fetch('../json/data.json')
            .then(response => response.json())
            .then(data => data)
            .catch(error => console.log(error));
    }

    function submit() {
        if (correctanswers === questionsnumber) {
            alert("Mission accomplished ðŸŽ‰ðŸŽ‰ðŸ¾ðŸ¾ðŸ¾ðŸ¾ðŸŽŠðŸŽŠðŸŽŠ");
            window.confettiful = new Confettiful(document.querySelector('.js-container'));
        } else {
            alert("Mission failed");
        }
    }

    const Confettiful = function (el) {
        this.el = el;
        this.containerEl = null;
        this.confettiColors = ['#EF2964', '#00C09D', '#2D87B0', '#48485E', '#EFFF1D'];
        this.confettiAnimations = ['slow', 'medium', 'fast'];

        this._setupElements();
        this._renderConfetti();
    };

    Confettiful.prototype._setupElements = function () {
        const containerEl = document.createElement('div');
        const elPosition = this.el.style.position;

        this.el.style.position = 'fixed';

        containerEl.classList.add('confetti-container');
        const height = document.documentElement.scrollHeight;
        containerEl.style.height = height + "px";

        this.el.appendChild(containerEl);

        this.containerEl = containerEl;
    };

    Confettiful.prototype._renderConfetti = function () {
        this.confettiInterval = setInterval(() => {
            const confettiEl = document.createElement('div');
            const confettiSize = (Math.floor(Math.random() * 3) + 7) + 'px';
            const confettiBackground = this.confettiColors[Math.floor(Math.random() * this.confettiColors.length)];
            const confettiLeft = (Math.floor(Math.random() * this.el.offsetWidth)) + 'px';
            const confettiAnimation = this.confettiAnimations[Math.floor(Math.random() * this.confettiAnimations.length)];

            confettiEl.classList.add('confetti', 'confetti--animation-' + confettiAnimation);
            confettiEl.style.left = confettiLeft;
            confettiEl.style.width = confettiSize;
            confettiEl.style.height = confettiSize;
            confettiEl.style.backgroundColor = confettiBackground;

            confettiEl.removeTimeout = setTimeout(function () {
                confettiEl.parentNode.removeChild(confettiEl);
            }, 3000);

            this.containerEl.appendChild(confettiEl);
        }, 25);
    };
</script>
</body>

</html>
